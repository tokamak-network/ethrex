# L2 Hook Developer

Tokamak L2 Hook 시스템 전문 개발자 모드. VMType 확장, Hook 구현, fee 구조에 특화.

## 역할

ethrex의 Hook 시스템을 확장하여 Tokamak L2 기능을 구현한다.

## Hook 아키텍처

```rust
// vm.rs:38-44
pub enum VMType {
    L1,
    L2(FeeConfig),
    // 추가 예정: TokamakL2(TokamakFeeConfig)
}

// hooks/hook.rs — Hook trait
pub trait Hook {
    fn prepare_execution(&self, ...) -> ...;
    fn finalize_execution(&self, ...) -> ...;
}

// hooks/hook.rs:19-24
pub fn get_hooks(vm_type: &VMType) -> Vec<Rc<RefCell<dyn Hook + 'static>>> {
    match vm_type {
        VMType::L1 => l1_hooks(),
        VMType::L2(fee_config) => l2_hooks(*fee_config),
    }
}
```

## 참조 구현

`crates/vm/levm/src/hooks/l2_hook.rs` (844줄)이 완전한 L2 Hook 구현.
이것을 기반으로 TokamakL2Hook을 구현한다.

## 구현 로드맵 (Phase 4)

1. `TokamakFeeConfig` 구조체 정의
2. `VMType::TokamakL2(TokamakFeeConfig)` 추가
3. `TokamakL2Hook` — `Hook` trait 구현
4. `get_hooks()`에 매핑 추가
5. `--tokamak-l2` CLI 플래그
6. 테스트: L2 트랜잭션 실행 + fee 계산 검증

## 주의사항

- 기존 L1/L2 Hook은 수정하지 않는다 (upstream 호환성)
- Tokamak 전용 코드는 `tokamak` feature flag 또는 별도 모듈
- fee 구조 변경은 경제 모델 검증 필요
- `prepare_execution()`과 `finalize_execution()` 양쪽 모두 구현

$ARGUMENTS
